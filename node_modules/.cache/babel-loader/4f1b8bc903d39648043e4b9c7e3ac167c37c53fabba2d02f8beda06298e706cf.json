{"ast":null,"code":"var _jsxFileName = \"/Users/swimming/Desktop/i2/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// è®¾ç½®APIåŸºç¡€URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:8000/api/documents';\nfunction App() {\n  _s();\n  // æ ‡ç­¾é¡µçŠ¶æ€\n  const [tabs, setTabs] = useState([]);\n  const [activeTabId, setActiveTabId] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // è‡ªåŠ¨ä¿å­˜ç›¸å…³çŠ¶æ€\n  const [dirtyTabs, setDirtyTabs] = useState(new Set()); // è®°å½•è¢«ç¼–è¾‘è¿‡çš„æ ‡ç­¾é¡µ\n\n  // èŠå¤©çŠ¶æ€\n  const [chatMessages, setChatMessages] = useState([{\n    id: 1,\n    role: 'assistant',\n    content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIåŠ©æ‰‹ã€‚æ‚¨å¯ä»¥åœ¨å·¦ä¾§ç¼–è¾‘Markdownæ–‡æ¡£ï¼Œç„¶ååœ¨è¿™é‡Œä¸æˆ‘è®¨è®ºæ‚¨çš„å†…å®¹ã€‚',\n    timestamp: new Date()\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isSending, setIsSending] = useState(false);\n\n  // ç›®å½•ç»“æ„çŠ¶æ€\n  const [directoryStructure, setDirectoryStructure] = useState([{\n    id: 'folder1',\n    name: 'ç¬”è®°ä¿¡æ¯',\n    type: 'folder',\n    expanded: true,\n    children: []\n  }]);\n\n  // å¼•ç”¨å…ƒç´ \n  const tabsContainerRef = useRef(null);\n  const directoryContentRef = useRef(null);\n  const activeTabRef = useRef(null);\n  const activeDirectoryItemRef = useRef(null);\n  const chatMessagesRef = useRef(null);\n\n  // è‡ªåŠ¨ä¿å­˜å®šæ—¶å™¨å¼•ç”¨\n  const saveIntervalRef = useRef(null);\n  const idleTimerRef = useRef(null);\n\n  // å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µ\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  // ç»„ä»¶åŠ è½½æ—¶ä»åç«¯è·å–æ–‡æ¡£æ•°æ®\n  useEffect(() => {\n    fetchDocuments();\n  }, []);\n\n  // è®¾ç½®è‡ªåŠ¨ä¿å­˜å®šæ—¶å™¨\n  useEffect(() => {\n    // è®¾ç½®5ç§’é—´éš”è‡ªåŠ¨ä¿å­˜\n    saveIntervalRef.current = setInterval(async () => {\n      // ä¿å­˜æ‰€æœ‰æ ‡è®°ä¸º\"è„\"çš„æ ‡ç­¾é¡µ\n      for (const tabId of dirtyTabs) {\n        const tab = tabs.find(t => t.id === tabId);\n        if (tab) {\n          await saveDocument(tab.id, tab.title, tab.content);\n          // ä¿å­˜æˆåŠŸåä»dirtyTabsä¸­ç§»é™¤\n          setDirtyTabs(prev => {\n            const newDirtyTabs = new Set(prev);\n            newDirtyTabs.delete(tabId);\n            return newDirtyTabs;\n          });\n        }\n      }\n    }, 5000); // 5ç§’\n\n    // æ¸…ç†å®šæ—¶å™¨\n    return () => {\n      if (saveIntervalRef.current) {\n        clearInterval(saveIntervalRef.current);\n      }\n      if (idleTimerRef.current) {\n        clearTimeout(idleTimerRef.current);\n      }\n    };\n  }, [tabs, dirtyTabs]);\n\n  // ä»åç«¯è·å–æ‰€æœ‰æ–‡æ¡£\n  const fetchDocuments = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(API_BASE_URL);\n      const documents = response.data;\n      if (documents.length > 0) {\n        // å°†æ–‡æ¡£è½¬æ¢ä¸ºæ ‡ç­¾é¡µæ ¼å¼\n        const newTabs = documents.map(doc => ({\n          id: doc.id,\n          title: doc.title,\n          content: doc.content\n        }));\n        setTabs(newTabs);\n        setActiveTabId(documents[0].id);\n\n        // æ„å»ºç›®å½•ç»“æ„\n        const fileItems = documents.map(doc => ({\n          id: doc.id,\n          name: doc.title,\n          type: 'file'\n        }));\n        setDirectoryStructure([{\n          id: 'folder1',\n          name: 'ç¬”è®°ä¿¡æ¯',\n          type: 'folder',\n          expanded: true,\n          children: fileItems\n        }]);\n      } else {\n        // å¦‚æœæ²¡æœ‰æ–‡æ¡£ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡æ¡£\n        createDefaultDocument();\n      }\n    } catch (error) {\n      console.error('è·å–æ–‡æ¡£å¤±è´¥:', error);\n      // å¦‚æœè·å–å¤±è´¥ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡æ¡£\n      createDefaultDocument();\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // åˆ›å»ºé»˜è®¤æ–‡æ¡£\n  const createDefaultDocument = async () => {\n    try {\n      const newDocument = {\n        title: 'æ–°å»ºæ–‡æ¡£1.md',\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n      const newTab = {\n        id: createdDocument.id,\n        title: createdDocument.title,\n        content: createdDocument.content\n      };\n      setTabs([newTab]);\n      setActiveTabId(createdDocument.id);\n\n      // æ›´æ–°ç›®å½•ç»“æ„\n      setDirectoryStructure([{\n        id: 'folder1',\n        name: 'ç¬”è®°ä¿¡æ¯',\n        type: 'folder',\n        expanded: true,\n        children: [{\n          id: createdDocument.id,\n          name: createdDocument.title,\n          type: 'file'\n        }]\n      }]);\n    } catch (error) {\n      console.error('åˆ›å»ºé»˜è®¤æ–‡æ¡£å¤±è´¥:', error);\n      // å¦‚æœåç«¯åˆ›å»ºå¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°é»˜è®¤æ–‡æ¡£\n      const defaultTab = {\n        id: 1,\n        title: 'æ–°å»ºæ–‡æ¡£1.md',\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      setTabs([defaultTab]);\n      setActiveTabId(1);\n    }\n  };\n\n  // ä¿å­˜æ–‡æ¡£åˆ°åç«¯\n  const saveDocument = async (docId, title, content) => {\n    try {\n      await axios.put(`${API_BASE_URL}/${docId}`, {\n        title: title,\n        content: content\n      });\n      console.log(`æ–‡æ¡£ ${docId} ä¿å­˜æˆåŠŸ`);\n    } catch (error) {\n      console.error(`ä¿å­˜æ–‡æ¡£ ${docId} å¤±è´¥:`, error);\n    }\n  };\n\n  // åˆ‡æ¢æ ‡ç­¾é¡µ\n  const handleTabClick = tabId => {\n    setActiveTabId(tabId);\n  };\n\n  // æ·»åŠ æ–°æ ‡ç­¾é¡µ\n  const handleAddTab = async () => {\n    try {\n      // é˜²æ­¢é‡å¤ç‚¹å‡»åˆ›å»ºå¤šä¸ªæ–‡æ¡£\n      if (handleAddTab.creating) return;\n      handleAddTab.creating = true;\n\n      // åˆ›å»ºæ–°æ–‡æ¡£\n      const maxId = Math.max(...tabs.map(t => typeof t.id === 'number' ? t.id : 0), 0);\n      const newTitle = `æ–°å»ºæ–‡æ¡£${maxId + 1}.md`;\n      const newDocument = {\n        title: newTitle,\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n\n      // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ ‡ç­¾\n      if (!tabs.find(tab => tab.id === createdDocument.id)) {\n        const newTab = {\n          id: createdDocument.id,\n          title: createdDocument.title,\n          content: createdDocument.content\n        };\n        setTabs(prevTabs => [...prevTabs, newTab]);\n        setActiveTabId(createdDocument.id);\n\n        // æ›´æ–°ç›®å½•ç»“æ„\n        const newFile = {\n          id: createdDocument.id,\n          name: createdDocument.title,\n          type: 'file'\n        };\n        setDirectoryStructure(prev => {\n          const newStructure = [...prev];\n          const folder = newStructure.find(item => item.id === 'folder1');\n          if (folder) {\n            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ–‡ä»¶\n            if (!folder.children.find(child => child.id === createdDocument.id)) {\n              folder.children = [...folder.children, newFile];\n            }\n          }\n          return newStructure;\n        });\n      }\n    } catch (error) {\n      console.error('åˆ›å»ºæ–°æ–‡æ¡£å¤±è´¥:', error);\n    } finally {\n      handleAddTab.creating = false;\n    }\n  };\n\n  // å…³é—­æ ‡ç­¾é¡µ\n  const handleCloseTab = async (e, tabId) => {\n    e.stopPropagation();\n    if (tabs.length <= 1) return; // è‡³å°‘ä¿ç•™ä¸€ä¸ªæ ‡ç­¾é¡µ\n\n    const newTabs = tabs.filter(tab => tab.id !== tabId);\n    setTabs(newTabs);\n\n    // å¦‚æœå…³é—­çš„æ˜¯å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µï¼Œåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µ\n    if (tabId === activeTabId) {\n      setActiveTabId(newTabs[0].id);\n    }\n\n    // æ³¨æ„ï¼šè¿™é‡Œä¸å†ä»åç«¯åˆ é™¤æ–‡æ¡£ï¼Œåªæ˜¯å…³é—­æ ‡ç­¾é¡µ\n    // ç›®å½•ç»“æ„ä¿æŒä¸å˜ï¼Œæ–‡æ¡£ä»ç„¶å­˜åœ¨äºåç«¯\n  };\n\n  // æ›´æ–°æ–‡æ¡£å†…å®¹\n  const handleContentChange = e => {\n    const updatedTabs = tabs.map(tab => tab.id === activeTabId ? {\n      ...tab,\n      content: e.target.value\n    } : tab);\n    setTabs(updatedTabs);\n\n    // å°†å½“å‰æ ‡ç­¾é¡µæ ‡è®°ä¸º\"è„\"ï¼ˆéœ€è¦ä¿å­˜ï¼‰\n    setDirtyTabs(prev => {\n      const newDirtyTabs = new Set(prev);\n      newDirtyTabs.add(activeTabId);\n      return newDirtyTabs;\n    });\n\n    // é‡ç½®ç©ºé—²å®šæ—¶å™¨ï¼ˆé˜²æŠ–ï¼‰\n    if (idleTimerRef.current) {\n      clearTimeout(idleTimerRef.current);\n    }\n\n    // è®¾ç½®2ç§’ç©ºé—²ä¿å­˜ï¼ˆç”¨æˆ·åœæ­¢è¾“å…¥2ç§’åè‡ªåŠ¨ä¿å­˜ï¼‰\n    idleTimerRef.current = setTimeout(async () => {\n      const tab = tabs.find(t => t.id === activeTabId);\n      if (tab) {\n        await saveDocument(tab.id, tab.title, tab.content);\n        // ä¿å­˜æˆåŠŸåä»dirtyTabsä¸­ç§»é™¤\n        setDirtyTabs(prev => {\n          const newDirtyTabs = new Set(prev);\n          newDirtyTabs.delete(activeTabId);\n          return newDirtyTabs;\n        });\n      }\n    }, 2000); // 2ç§’ç©ºé—²\n  };\n\n  // ä¿å­˜æ–‡æ¡£ï¼ˆCmd+Sï¼‰\n  const handleSaveDocument = async () => {\n    if (activeTab) {\n      await saveDocument(activeTab.id, activeTab.title, activeTab.content);\n    }\n  };\n\n  // å¤„ç†é”®ç›˜äº‹ä»¶\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n        e.preventDefault();\n        handleSaveDocument();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [activeTab]);\n\n  // åˆ‡æ¢æ–‡ä»¶å¤¹å±•å¼€/æ”¶èµ·çŠ¶æ€\n  const toggleFolder = folderId => {\n    const updateFolderExpanded = items => {\n      return items.map(item => {\n        if (item.type === 'folder' && item.id === folderId) {\n          return {\n            ...item,\n            expanded: !item.expanded\n          };\n        } else if (item.type === 'folder' && item.children) {\n          return {\n            ...item,\n            children: updateFolderExpanded(item.children)\n          };\n        }\n        return item;\n      });\n    };\n    setDirectoryStructure(updateFolderExpanded(directoryStructure));\n  };\n\n  // æ·»åŠ æ–°æ–‡ä»¶å¤¹\n  const addNewFolder = () => {\n    const newFolder = {\n      id: `folder${Date.now()}`,\n      name: 'æ–°å»ºæ–‡ä»¶å¤¹',\n      type: 'folder',\n      expanded: true,\n      children: []\n    };\n    setDirectoryStructure([newFolder, ...directoryStructure]);\n  };\n\n  // æ·»åŠ æ–°æ–‡ä»¶\n  const addNewFile = async () => {\n    try {\n      // é˜²æ­¢é‡å¤ç‚¹å‡»åˆ›å»ºå¤šä¸ªæ–‡æ¡£\n      if (addNewFile.creating) return;\n      addNewFile.creating = true;\n\n      // æ‰¾åˆ°æœ€å¤§çš„æ•°å­—ID\n      const maxId = Math.max(...tabs.map(t => typeof t.id === 'number' ? t.id : 0), 0);\n      const newTitle = `æ–°å»ºæ–‡æ¡£${maxId + 1}.md`;\n      const newDocument = {\n        title: newTitle,\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n\n      // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ ‡ç­¾\n      if (!tabs.find(tab => tab.id === createdDocument.id)) {\n        const newFile = {\n          id: createdDocument.id,\n          name: createdDocument.title,\n          type: 'file'\n        };\n\n        // åˆ›å»ºå¯¹åº”çš„æ–°æ ‡ç­¾é¡µ\n        const newTab = {\n          id: createdDocument.id,\n          title: createdDocument.title,\n          content: createdDocument.content\n        };\n        setTabs(prevTabs => [...prevTabs, newTab]);\n        setActiveTabId(createdDocument.id); // é€‰ä¸­æ–°å»ºçš„æ–‡æ¡£\n\n        // å°†æ–°æ–‡ä»¶æ·»åŠ åˆ°ç¬”è®°ä¿¡æ¯æ–‡ä»¶å¤¹\n        setDirectoryStructure(prev => {\n          const newStructure = [...prev];\n          const folder = newStructure.find(item => item.id === 'folder1');\n          if (folder) {\n            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ–‡ä»¶\n            if (!folder.children.find(child => child.id === createdDocument.id)) {\n              folder.children = [...folder.children, newFile];\n            }\n          }\n          return newStructure;\n        });\n      }\n    } catch (error) {\n      console.error('åˆ›å»ºæ–°æ–‡ä»¶å¤±è´¥:', error);\n    } finally {\n      addNewFile.creating = false;\n    }\n  };\n\n  // ä»ç›®å½•åŒºé€‰æ‹©æ–‡ä»¶\n  const handleFileSelect = fileId => {\n    // æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨äºæ ‡ç­¾é¡µä¸­\n    const existingTab = tabs.find(tab => tab.id === fileId);\n    if (existingTab) {\n      // å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥é€‰ä¸­\n      setActiveTabId(fileId);\n    } else {\n      // å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨äºæ ‡ç­¾é¡µä¸­ï¼Œåœ¨æ ‡ç­¾é¡µæœ«å°¾è¿½åŠ æ–°æ ‡ç­¾\n      // é¦–å…ˆåœ¨ç›®å½•ç»“æ„ä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶\n      const findFileInDirectory = items => {\n        for (const item of items) {\n          if (item.type === 'file' && item.id === fileId) {\n            return item;\n          } else if (item.type === 'folder' && item.children) {\n            const found = findFileInDirectory(item.children);\n            if (found) return found;\n          }\n        }\n        return null;\n      };\n      const file = findFileInDirectory(directoryStructure);\n      if (file) {\n        // ä»åç«¯è·å–æ–‡æ¡£å†…å®¹\n        axios.get(`${API_BASE_URL}/${fileId}`).then(response => {\n          const document = response.data;\n          // åˆ›å»ºæ–°çš„æ ‡ç­¾é¡µå¹¶è¿½åŠ åˆ°æœ«å°¾\n          const newTab = {\n            id: document.id,\n            title: document.title,\n            content: document.content\n          };\n          setTabs([...tabs, newTab]);\n          setActiveTabId(document.id);\n        }).catch(error => {\n          console.error('è·å–æ–‡æ¡£å†…å®¹å¤±è´¥:', error);\n          // å¦‚æœè·å–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å†…å®¹\n          const newTab = {\n            id: fileId,\n            title: file.name,\n            content: '# ' + file.name.replace('.md', '') + '\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n          };\n          setTabs([...tabs, newTab]);\n          setActiveTabId(fileId);\n        });\n      }\n    }\n  };\n\n  // å½“æ´»åŠ¨æ ‡ç­¾é¡µæ”¹å˜æ—¶ï¼Œæ»šåŠ¨åˆ°å¯è§ä½ç½®\n  useEffect(() => {\n    // æ»šåŠ¨æ ‡ç­¾é¡µåˆ°å¯è§ä½ç½®\n    if (tabsContainerRef.current) {\n      // æ‰¾åˆ°æ´»åŠ¨æ ‡ç­¾é¡µçš„DOMå…ƒç´ \n      const activeTabElement = document.querySelector('.tab.active');\n      if (activeTabElement) {\n        const container = tabsContainerRef.current;\n        const containerRect = container.getBoundingClientRect();\n        const activeTabRect = activeTabElement.getBoundingClientRect();\n\n        // å¦‚æœæ´»åŠ¨æ ‡ç­¾é¡µä¸åœ¨å¯è§åŒºåŸŸå†…ï¼Œåˆ™æ»šåŠ¨åˆ°å¯è§ä½ç½®\n        if (activeTabRect.left < containerRect.left) {\n          container.scrollLeft += activeTabRect.left - containerRect.left - 10;\n        } else if (activeTabRect.right > containerRect.right) {\n          container.scrollLeft += activeTabRect.right - containerRect.right + 10;\n        }\n      }\n    }\n\n    // æ»šåŠ¨ç›®å½•é¡¹åˆ°å¯è§ä½ç½®\n    if (activeDirectoryItemRef.current && directoryContentRef.current) {\n      const container = directoryContentRef.current;\n      const activeItem = activeDirectoryItemRef.current;\n      const containerRect = container.getBoundingClientRect();\n      const activeItemRect = activeItem.getBoundingClientRect();\n\n      // å¦‚æœæ´»åŠ¨ç›®å½•é¡¹ä¸åœ¨å¯è§åŒºåŸŸå†…ï¼Œåˆ™æ»šåŠ¨åˆ°å¯è§ä½ç½®\n      if (activeItemRect.top < containerRect.top) {\n        container.scrollTop += activeItemRect.top - containerRect.top - 10;\n      } else if (activeItemRect.bottom > containerRect.bottom) {\n        container.scrollTop += activeItemRect.bottom - containerRect.bottom + 10;\n      }\n    }\n  }, [activeTabId]);\n\n  // æ¸²æŸ“ç›®å½•é¡¹\n  const renderDirectoryItem = (item, level = 0) => {\n    const indent = {\n      paddingLeft: `${level * 20 + 10}px`\n    };\n    if (item.type === 'folder') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"directory-item folder\",\n          style: indent,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"folder-toggle\",\n            onClick: () => toggleFolder(item.id),\n            children: item.expanded ? 'â–¼' : 'â–¶'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"folder-icon\",\n            children: \"\\uD83D\\uDCC1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"folder-name\",\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this), item.expanded && item.children && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"folder-children\",\n          children: item.children.map(child => renderDirectoryItem(child, level + 1))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: activeTabId === item.id ? activeDirectoryItemRef : null,\n        className: `directory-item file ${activeTabId === item.id ? 'active' : ''}`,\n        style: indent,\n        onClick: () => handleFileSelect(item.id),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-icon\",\n          children: \"\\uD83D\\uDCC4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"file-name\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  // æ˜¾ç¤ºåŠ è½½çŠ¶æ€\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u6B63\\u5728\\u52A0\\u8F7D\\u6587\\u6863...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tabs-container\",\n          ref: tabsContainerRef,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tabs\",\n            children: [tabs.map(tab => /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: tab.id === activeTabId ? activeTabRef : null,\n              className: `tab ${tab.id === activeTabId ? 'active' : ''}`,\n              onClick: () => handleTabClick(tab.id),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"tab-title\",\n                children: tab.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"tab-close\",\n                onClick: e => handleCloseTab(e, tab.id),\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 19\n              }, this)]\n            }, tab.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"add-tab-button\",\n              onClick: handleAddTab,\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"editor-content\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"document-editor markdown-editor\",\n            placeholder: \"\\u5728\\u6B64\\u5904\\u8F93\\u5165Markdown\\u683C\\u5F0F\\u7684\\u6587\\u6863\\u5185\\u5BB9...\",\n            value: activeTab ? activeTab.content : '',\n            onChange: handleContentChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"directory-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"directory-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u8D44\\u6E90\\u7BA1\\u7406\\u5668\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"directory-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"add-folder-btn\",\n                onClick: addNewFolder,\n                children: \"\\uD83D\\uDCC1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"add-file-btn\",\n                onClick: addNewFile,\n                children: \"\\uD83D\\uDCC4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"directory-content\",\n            ref: directoryContentRef,\n            children: directoryStructure.map(item => renderDirectoryItem(item))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"AI \\u52A9\\u624B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-messages\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message received\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: \"\\u60A8\\u597D\\uFF01\\u6211\\u662F\\u60A8\\u7684AI\\u52A9\\u624B\\u3002\\u60A8\\u53EF\\u4EE5\\u5728\\u5DE6\\u4FA7\\u7F16\\u8F91Markdown\\u6587\\u6863\\uFF0C\\u7136\\u540E\\u5728\\u8FD9\\u91CC\\u4E0E\\u6211\\u8BA8\\u8BBA\\u60A8\\u7684\\u5185\\u5BB9\\u3002\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-time\",\n                children: \"\\u73B0\\u5728\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"chat-input\",\n              placeholder: \"\\u8F93\\u5165\\u6D88\\u606F...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"send-button\",\n              children: \"\\u53D1\\u9001\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 568,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"XYCd3v4t5y5LDq520trAF+FxciM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","jsxDEV","_jsxDEV","API_BASE_URL","App","_s","tabs","setTabs","activeTabId","setActiveTabId","isLoading","setIsLoading","dirtyTabs","setDirtyTabs","Set","chatMessages","setChatMessages","id","role","content","timestamp","Date","chatInput","setChatInput","isSending","setIsSending","directoryStructure","setDirectoryStructure","name","type","expanded","children","tabsContainerRef","directoryContentRef","activeTabRef","activeDirectoryItemRef","chatMessagesRef","saveIntervalRef","idleTimerRef","activeTab","find","tab","fetchDocuments","current","setInterval","tabId","t","saveDocument","title","prev","newDirtyTabs","delete","clearInterval","clearTimeout","response","get","documents","data","length","newTabs","map","doc","fileItems","createDefaultDocument","error","console","newDocument","post","createdDocument","newTab","defaultTab","docId","put","log","handleTabClick","handleAddTab","creating","maxId","Math","max","newTitle","prevTabs","newFile","newStructure","folder","item","child","handleCloseTab","e","stopPropagation","filter","handleContentChange","updatedTabs","target","value","add","setTimeout","handleSaveDocument","handleKeyDown","ctrlKey","metaKey","key","preventDefault","document","addEventListener","removeEventListener","toggleFolder","folderId","updateFolderExpanded","items","addNewFolder","newFolder","now","addNewFile","handleFileSelect","fileId","existingTab","findFileInDirectory","found","file","then","catch","replace","activeTabElement","querySelector","container","containerRect","getBoundingClientRect","activeTabRect","left","scrollLeft","right","activeItem","activeItemRect","top","scrollTop","bottom","renderDirectoryItem","level","indent","paddingLeft","className","style","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","placeholder","onChange","_c","$RefreshReg$"],"sources":["/Users/swimming/Desktop/i2/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// è®¾ç½®APIåŸºç¡€URL\nconst API_BASE_URL = 'http://localhost:8000/api/documents';\n\nfunction App() {\n  // æ ‡ç­¾é¡µçŠ¶æ€\n  const [tabs, setTabs] = useState([]);\n  const [activeTabId, setActiveTabId] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  \n  // è‡ªåŠ¨ä¿å­˜ç›¸å…³çŠ¶æ€\n  const [dirtyTabs, setDirtyTabs] = useState(new Set()); // è®°å½•è¢«ç¼–è¾‘è¿‡çš„æ ‡ç­¾é¡µ\n  \n  // èŠå¤©çŠ¶æ€\n  const [chatMessages, setChatMessages] = useState([\n    {\n      id: 1,\n      role: 'assistant',\n      content: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIåŠ©æ‰‹ã€‚æ‚¨å¯ä»¥åœ¨å·¦ä¾§ç¼–è¾‘Markdownæ–‡æ¡£ï¼Œç„¶ååœ¨è¿™é‡Œä¸æˆ‘è®¨è®ºæ‚¨çš„å†…å®¹ã€‚',\n      timestamp: new Date()\n    }\n  ]);\n  const [chatInput, setChatInput] = useState('');\n  const [isSending, setIsSending] = useState(false);\n\n  // ç›®å½•ç»“æ„çŠ¶æ€\n  const [directoryStructure, setDirectoryStructure] = useState([\n    {\n      id: 'folder1',\n      name: 'ç¬”è®°ä¿¡æ¯',\n      type: 'folder',\n      expanded: true,\n      children: []\n    }\n  ]);\n\n  // å¼•ç”¨å…ƒç´ \n  const tabsContainerRef = useRef(null);\n  const directoryContentRef = useRef(null);\n  const activeTabRef = useRef(null);\n  const activeDirectoryItemRef = useRef(null);\n  const chatMessagesRef = useRef(null);\n  \n  // è‡ªåŠ¨ä¿å­˜å®šæ—¶å™¨å¼•ç”¨\n  const saveIntervalRef = useRef(null);\n  const idleTimerRef = useRef(null);\n\n  // å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µ\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  // ç»„ä»¶åŠ è½½æ—¶ä»åç«¯è·å–æ–‡æ¡£æ•°æ®\n  useEffect(() => {\n    fetchDocuments();\n  }, []);\n\n  // è®¾ç½®è‡ªåŠ¨ä¿å­˜å®šæ—¶å™¨\n  useEffect(() => {\n    // è®¾ç½®5ç§’é—´éš”è‡ªåŠ¨ä¿å­˜\n    saveIntervalRef.current = setInterval(async () => {\n      // ä¿å­˜æ‰€æœ‰æ ‡è®°ä¸º\"è„\"çš„æ ‡ç­¾é¡µ\n      for (const tabId of dirtyTabs) {\n        const tab = tabs.find(t => t.id === tabId);\n        if (tab) {\n          await saveDocument(tab.id, tab.title, tab.content);\n          // ä¿å­˜æˆåŠŸåä»dirtyTabsä¸­ç§»é™¤\n          setDirtyTabs(prev => {\n            const newDirtyTabs = new Set(prev);\n            newDirtyTabs.delete(tabId);\n            return newDirtyTabs;\n          });\n        }\n      }\n    }, 5000); // 5ç§’\n\n    // æ¸…ç†å®šæ—¶å™¨\n    return () => {\n      if (saveIntervalRef.current) {\n        clearInterval(saveIntervalRef.current);\n      }\n      if (idleTimerRef.current) {\n        clearTimeout(idleTimerRef.current);\n      }\n    };\n  }, [tabs, dirtyTabs]);\n\n  // ä»åç«¯è·å–æ‰€æœ‰æ–‡æ¡£\n  const fetchDocuments = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(API_BASE_URL);\n      const documents = response.data;\n      \n      if (documents.length > 0) {\n        // å°†æ–‡æ¡£è½¬æ¢ä¸ºæ ‡ç­¾é¡µæ ¼å¼\n        const newTabs = documents.map(doc => ({\n          id: doc.id,\n          title: doc.title,\n          content: doc.content\n        }));\n        \n        setTabs(newTabs);\n        setActiveTabId(documents[0].id);\n        \n        // æ„å»ºç›®å½•ç»“æ„\n        const fileItems = documents.map(doc => ({\n          id: doc.id,\n          name: doc.title,\n          type: 'file'\n        }));\n        \n        setDirectoryStructure([\n          {\n            id: 'folder1',\n            name: 'ç¬”è®°ä¿¡æ¯',\n            type: 'folder',\n            expanded: true,\n            children: fileItems\n          }\n        ]);\n      } else {\n        // å¦‚æœæ²¡æœ‰æ–‡æ¡£ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡æ¡£\n        createDefaultDocument();\n      }\n    } catch (error) {\n      console.error('è·å–æ–‡æ¡£å¤±è´¥:', error);\n      // å¦‚æœè·å–å¤±è´¥ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡æ¡£\n      createDefaultDocument();\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // åˆ›å»ºé»˜è®¤æ–‡æ¡£\n  const createDefaultDocument = async () => {\n    try {\n      const newDocument = {\n        title: 'æ–°å»ºæ–‡æ¡£1.md',\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      \n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n      \n      const newTab = {\n        id: createdDocument.id,\n        title: createdDocument.title,\n        content: createdDocument.content\n      };\n      \n      setTabs([newTab]);\n      setActiveTabId(createdDocument.id);\n      \n      // æ›´æ–°ç›®å½•ç»“æ„\n      setDirectoryStructure([\n        {\n          id: 'folder1',\n          name: 'ç¬”è®°ä¿¡æ¯',\n          type: 'folder',\n          expanded: true,\n          children: [\n            {\n              id: createdDocument.id,\n              name: createdDocument.title,\n              type: 'file'\n            }\n          ]\n        }\n      ]);\n    } catch (error) {\n      console.error('åˆ›å»ºé»˜è®¤æ–‡æ¡£å¤±è´¥:', error);\n      // å¦‚æœåç«¯åˆ›å»ºå¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°é»˜è®¤æ–‡æ¡£\n      const defaultTab = {\n        id: 1,\n        title: 'æ–°å»ºæ–‡æ¡£1.md',\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      \n      setTabs([defaultTab]);\n      setActiveTabId(1);\n    }\n  };\n\n  // ä¿å­˜æ–‡æ¡£åˆ°åç«¯\n  const saveDocument = async (docId, title, content) => {\n    try {\n      await axios.put(`${API_BASE_URL}/${docId}`, {\n        title: title,\n        content: content\n      });\n      console.log(`æ–‡æ¡£ ${docId} ä¿å­˜æˆåŠŸ`);\n    } catch (error) {\n      console.error(`ä¿å­˜æ–‡æ¡£ ${docId} å¤±è´¥:`, error);\n    }\n  };\n\n  // åˆ‡æ¢æ ‡ç­¾é¡µ\n  const handleTabClick = (tabId) => {\n    setActiveTabId(tabId);\n  };\n\n  // æ·»åŠ æ–°æ ‡ç­¾é¡µ\n  const handleAddTab = async () => {\n    try {\n      // é˜²æ­¢é‡å¤ç‚¹å‡»åˆ›å»ºå¤šä¸ªæ–‡æ¡£\n      if (handleAddTab.creating) return;\n      handleAddTab.creating = true;\n      \n      // åˆ›å»ºæ–°æ–‡æ¡£\n      const maxId = Math.max(...tabs.map(t => typeof t.id === 'number' ? t.id : 0), 0);\n      const newTitle = `æ–°å»ºæ–‡æ¡£${maxId + 1}.md`;\n      \n      const newDocument = {\n        title: newTitle,\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      \n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n      \n      // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ ‡ç­¾\n      if (!tabs.find(tab => tab.id === createdDocument.id)) {\n        const newTab = {\n          id: createdDocument.id,\n          title: createdDocument.title,\n          content: createdDocument.content\n        };\n        \n        setTabs(prevTabs => [...prevTabs, newTab]);\n        setActiveTabId(createdDocument.id);\n        \n        // æ›´æ–°ç›®å½•ç»“æ„\n        const newFile = {\n          id: createdDocument.id,\n          name: createdDocument.title,\n          type: 'file'\n        };\n        \n        setDirectoryStructure(prev => {\n          const newStructure = [...prev];\n          const folder = newStructure.find(item => item.id === 'folder1');\n          if (folder) {\n            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ–‡ä»¶\n            if (!folder.children.find(child => child.id === createdDocument.id)) {\n              folder.children = [...folder.children, newFile];\n            }\n          }\n          return newStructure;\n        });\n      }\n    } catch (error) {\n      console.error('åˆ›å»ºæ–°æ–‡æ¡£å¤±è´¥:', error);\n    } finally {\n      handleAddTab.creating = false;\n    }\n  };\n\n  // å…³é—­æ ‡ç­¾é¡µ\n  const handleCloseTab = async (e, tabId) => {\n    e.stopPropagation();\n    if (tabs.length <= 1) return; // è‡³å°‘ä¿ç•™ä¸€ä¸ªæ ‡ç­¾é¡µ\n    \n    const newTabs = tabs.filter(tab => tab.id !== tabId);\n    setTabs(newTabs);\n    \n    // å¦‚æœå…³é—­çš„æ˜¯å½“å‰æ´»åŠ¨æ ‡ç­¾é¡µï¼Œåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µ\n    if (tabId === activeTabId) {\n      setActiveTabId(newTabs[0].id);\n    }\n    \n    // æ³¨æ„ï¼šè¿™é‡Œä¸å†ä»åç«¯åˆ é™¤æ–‡æ¡£ï¼Œåªæ˜¯å…³é—­æ ‡ç­¾é¡µ\n    // ç›®å½•ç»“æ„ä¿æŒä¸å˜ï¼Œæ–‡æ¡£ä»ç„¶å­˜åœ¨äºåç«¯\n  };\n\n  // æ›´æ–°æ–‡æ¡£å†…å®¹\n  const handleContentChange = (e) => {\n    const updatedTabs = tabs.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, content: e.target.value } \n        : tab\n    );\n    setTabs(updatedTabs);\n    \n    // å°†å½“å‰æ ‡ç­¾é¡µæ ‡è®°ä¸º\"è„\"ï¼ˆéœ€è¦ä¿å­˜ï¼‰\n    setDirtyTabs(prev => {\n      const newDirtyTabs = new Set(prev);\n      newDirtyTabs.add(activeTabId);\n      return newDirtyTabs;\n    });\n    \n    // é‡ç½®ç©ºé—²å®šæ—¶å™¨ï¼ˆé˜²æŠ–ï¼‰\n    if (idleTimerRef.current) {\n      clearTimeout(idleTimerRef.current);\n    }\n    \n    // è®¾ç½®2ç§’ç©ºé—²ä¿å­˜ï¼ˆç”¨æˆ·åœæ­¢è¾“å…¥2ç§’åè‡ªåŠ¨ä¿å­˜ï¼‰\n    idleTimerRef.current = setTimeout(async () => {\n      const tab = tabs.find(t => t.id === activeTabId);\n      if (tab) {\n        await saveDocument(tab.id, tab.title, tab.content);\n        // ä¿å­˜æˆåŠŸåä»dirtyTabsä¸­ç§»é™¤\n        setDirtyTabs(prev => {\n          const newDirtyTabs = new Set(prev);\n          newDirtyTabs.delete(activeTabId);\n          return newDirtyTabs;\n        });\n      }\n    }, 2000); // 2ç§’ç©ºé—²\n  };\n\n  // ä¿å­˜æ–‡æ¡£ï¼ˆCmd+Sï¼‰\n  const handleSaveDocument = async () => {\n    if (activeTab) {\n      await saveDocument(activeTab.id, activeTab.title, activeTab.content);\n    }\n  };\n\n  // å¤„ç†é”®ç›˜äº‹ä»¶\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n        e.preventDefault();\n        handleSaveDocument();\n      }\n    };\n    \n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [activeTab]);\n\n  // åˆ‡æ¢æ–‡ä»¶å¤¹å±•å¼€/æ”¶èµ·çŠ¶æ€\n  const toggleFolder = (folderId) => {\n    const updateFolderExpanded = (items) => {\n      return items.map(item => {\n        if (item.type === 'folder' && item.id === folderId) {\n          return { ...item, expanded: !item.expanded };\n        } else if (item.type === 'folder' && item.children) {\n          return { ...item, children: updateFolderExpanded(item.children) };\n        }\n        return item;\n      });\n    };\n    \n    setDirectoryStructure(updateFolderExpanded(directoryStructure));\n  };\n\n  // æ·»åŠ æ–°æ–‡ä»¶å¤¹\n  const addNewFolder = () => {\n    const newFolder = {\n      id: `folder${Date.now()}`,\n      name: 'æ–°å»ºæ–‡ä»¶å¤¹',\n      type: 'folder',\n      expanded: true,\n      children: []\n    };\n    \n    setDirectoryStructure([newFolder, ...directoryStructure]);\n  };\n\n  // æ·»åŠ æ–°æ–‡ä»¶\n  const addNewFile = async () => {\n    try {\n      // é˜²æ­¢é‡å¤ç‚¹å‡»åˆ›å»ºå¤šä¸ªæ–‡æ¡£\n      if (addNewFile.creating) return;\n      addNewFile.creating = true;\n      \n      // æ‰¾åˆ°æœ€å¤§çš„æ•°å­—ID\n      const maxId = Math.max(...tabs.map(t => typeof t.id === 'number' ? t.id : 0), 0);\n      const newTitle = `æ–°å»ºæ–‡æ¡£${maxId + 1}.md`;\n      \n      const newDocument = {\n        title: newTitle,\n        content: '# æ–°å»ºæ–‡æ¡£\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n      };\n      \n      const response = await axios.post(API_BASE_URL, newDocument);\n      const createdDocument = response.data;\n      \n      // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ ‡ç­¾\n      if (!tabs.find(tab => tab.id === createdDocument.id)) {\n        const newFile = {\n          id: createdDocument.id,\n          name: createdDocument.title,\n          type: 'file'\n        };\n        \n        // åˆ›å»ºå¯¹åº”çš„æ–°æ ‡ç­¾é¡µ\n        const newTab = {\n          id: createdDocument.id,\n          title: createdDocument.title,\n          content: createdDocument.content\n        };\n        \n        setTabs(prevTabs => [...prevTabs, newTab]);\n        setActiveTabId(createdDocument.id); // é€‰ä¸­æ–°å»ºçš„æ–‡æ¡£\n        \n        // å°†æ–°æ–‡ä»¶æ·»åŠ åˆ°ç¬”è®°ä¿¡æ¯æ–‡ä»¶å¤¹\n        setDirectoryStructure(prev => {\n          const newStructure = [...prev];\n          const folder = newStructure.find(item => item.id === 'folder1');\n          if (folder) {\n            // æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ç›¸åŒIDçš„æ–‡ä»¶\n            if (!folder.children.find(child => child.id === createdDocument.id)) {\n              folder.children = [...folder.children, newFile];\n            }\n          }\n          return newStructure;\n        });\n      }\n    } catch (error) {\n      console.error('åˆ›å»ºæ–°æ–‡ä»¶å¤±è´¥:', error);\n    } finally {\n      addNewFile.creating = false;\n    }\n  };\n\n  // ä»ç›®å½•åŒºé€‰æ‹©æ–‡ä»¶\n  const handleFileSelect = (fileId) => {\n    // æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨äºæ ‡ç­¾é¡µä¸­\n    const existingTab = tabs.find(tab => tab.id === fileId);\n    \n    if (existingTab) {\n      // å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥é€‰ä¸­\n      setActiveTabId(fileId);\n    } else {\n      // å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨äºæ ‡ç­¾é¡µä¸­ï¼Œåœ¨æ ‡ç­¾é¡µæœ«å°¾è¿½åŠ æ–°æ ‡ç­¾\n      // é¦–å…ˆåœ¨ç›®å½•ç»“æ„ä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶\n      const findFileInDirectory = (items) => {\n        for (const item of items) {\n          if (item.type === 'file' && item.id === fileId) {\n            return item;\n          } else if (item.type === 'folder' && item.children) {\n            const found = findFileInDirectory(item.children);\n            if (found) return found;\n          }\n        }\n        return null;\n      };\n      \n      const file = findFileInDirectory(directoryStructure);\n      if (file) {\n        // ä»åç«¯è·å–æ–‡æ¡£å†…å®¹\n        axios.get(`${API_BASE_URL}/${fileId}`)\n          .then(response => {\n            const document = response.data;\n            // åˆ›å»ºæ–°çš„æ ‡ç­¾é¡µå¹¶è¿½åŠ åˆ°æœ«å°¾\n            const newTab = {\n              id: document.id,\n              title: document.title,\n              content: document.content\n            };\n            \n            setTabs([...tabs, newTab]);\n            setActiveTabId(document.id);\n          })\n          .catch(error => {\n            console.error('è·å–æ–‡æ¡£å†…å®¹å¤±è´¥:', error);\n            // å¦‚æœè·å–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å†…å®¹\n            const newTab = {\n              id: fileId,\n              title: file.name,\n              content: '# ' + file.name.replace('.md', '') + '\\n\\nåœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„å†…å®¹...'\n            };\n            \n            setTabs([...tabs, newTab]);\n            setActiveTabId(fileId);\n          });\n      }\n    }\n  };\n\n  // å½“æ´»åŠ¨æ ‡ç­¾é¡µæ”¹å˜æ—¶ï¼Œæ»šåŠ¨åˆ°å¯è§ä½ç½®\n  useEffect(() => {\n    // æ»šåŠ¨æ ‡ç­¾é¡µåˆ°å¯è§ä½ç½®\n    if (tabsContainerRef.current) {\n      // æ‰¾åˆ°æ´»åŠ¨æ ‡ç­¾é¡µçš„DOMå…ƒç´ \n      const activeTabElement = document.querySelector('.tab.active');\n      if (activeTabElement) {\n        const container = tabsContainerRef.current;\n        const containerRect = container.getBoundingClientRect();\n        const activeTabRect = activeTabElement.getBoundingClientRect();\n        \n        // å¦‚æœæ´»åŠ¨æ ‡ç­¾é¡µä¸åœ¨å¯è§åŒºåŸŸå†…ï¼Œåˆ™æ»šåŠ¨åˆ°å¯è§ä½ç½®\n        if (activeTabRect.left < containerRect.left) {\n          container.scrollLeft += activeTabRect.left - containerRect.left - 10;\n        } else if (activeTabRect.right > containerRect.right) {\n          container.scrollLeft += activeTabRect.right - containerRect.right + 10;\n        }\n      }\n    }\n    \n    // æ»šåŠ¨ç›®å½•é¡¹åˆ°å¯è§ä½ç½®\n    if (activeDirectoryItemRef.current && directoryContentRef.current) {\n      const container = directoryContentRef.current;\n      const activeItem = activeDirectoryItemRef.current;\n      \n      const containerRect = container.getBoundingClientRect();\n      const activeItemRect = activeItem.getBoundingClientRect();\n      \n      // å¦‚æœæ´»åŠ¨ç›®å½•é¡¹ä¸åœ¨å¯è§åŒºåŸŸå†…ï¼Œåˆ™æ»šåŠ¨åˆ°å¯è§ä½ç½®\n      if (activeItemRect.top < containerRect.top) {\n        container.scrollTop += activeItemRect.top - containerRect.top - 10;\n      } else if (activeItemRect.bottom > containerRect.bottom) {\n        container.scrollTop += activeItemRect.bottom - containerRect.bottom + 10;\n      }\n    }\n  }, [activeTabId]);\n\n  // æ¸²æŸ“ç›®å½•é¡¹\n  const renderDirectoryItem = (item, level = 0) => {\n    const indent = { paddingLeft: `${level * 20 + 10}px` };\n    \n    if (item.type === 'folder') {\n      return (\n        <div key={item.id}>\n          <div \n            className=\"directory-item folder\"\n            style={indent}\n          >\n            <span \n              className=\"folder-toggle\"\n              onClick={() => toggleFolder(item.id)}\n            >\n              {item.expanded ? 'â–¼' : 'â–¶'}\n            </span>\n            <span className=\"folder-icon\">ğŸ“</span>\n            <span className=\"folder-name\">{item.name}</span>\n          </div>\n          {item.expanded && item.children && (\n            <div className=\"folder-children\">\n              {item.children.map(child => renderDirectoryItem(child, level + 1))}\n            </div>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div \n          ref={activeTabId === item.id ? activeDirectoryItemRef : null}\n          key={item.id}\n          className={`directory-item file ${activeTabId === item.id ? 'active' : ''}`}\n          style={indent}\n          onClick={() => handleFileSelect(item.id)}\n        >\n          <span className=\"file-icon\">ğŸ“„</span>\n          <span className=\"file-name\">{item.name}</span>\n        </div>\n      );\n    }\n  };\n\n  // æ˜¾ç¤ºåŠ è½½çŠ¶æ€\n  if (isLoading) {\n    return (\n      <div className=\"App\">\n        <div className=\"loading-container\">\n          <p>æ­£åœ¨åŠ è½½æ–‡æ¡£...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"app-container\">\n        <div className=\"editor-container\">\n          <div className=\"tabs-container\" ref={tabsContainerRef}>\n            <div className=\"tabs\">\n              {tabs.map(tab => (\n                <div \n                  ref={tab.id === activeTabId ? activeTabRef : null}\n                  key={tab.id}\n                  className={`tab ${tab.id === activeTabId ? 'active' : ''}`}\n                  onClick={() => handleTabClick(tab.id)}\n                >\n                  <span className=\"tab-title\">{tab.title}</span>\n                  <span \n                    className=\"tab-close\"\n                    onClick={(e) => handleCloseTab(e, tab.id)}\n                  >\n                    Ã—\n                  </span>\n                </div>\n              ))}\n              <button className=\"add-tab-button\" onClick={handleAddTab}>+</button>\n            </div>\n          </div>\n          <div className=\"editor-content\">\n            <textarea \n              className=\"document-editor markdown-editor\"\n              placeholder=\"åœ¨æ­¤å¤„è¾“å…¥Markdownæ ¼å¼çš„æ–‡æ¡£å†…å®¹...\"\n              value={activeTab ? activeTab.content : ''}\n              onChange={handleContentChange}\n            />\n          </div>\n        </div>\n        <div className=\"right-panel\">\n          <div className=\"directory-container\">\n            <div className=\"directory-header\">\n              <h2>èµ„æºç®¡ç†å™¨</h2>\n              <div className=\"directory-actions\">\n                <button className=\"add-folder-btn\" onClick={addNewFolder}>ğŸ“</button>\n                <button className=\"add-file-btn\" onClick={addNewFile}>ğŸ“„</button>\n              </div>\n            </div>\n            <div className=\"directory-content\" ref={directoryContentRef}>\n              {directoryStructure.map(item => renderDirectoryItem(item))}\n            </div>\n          </div>\n          <div className=\"chat-container\">\n            <div className=\"chat-header\">\n              <h2>AI åŠ©æ‰‹</h2>\n            </div>\n            <div className=\"chat-messages\">\n              <div className=\"message received\">\n                <div className=\"message-content\">\n                  æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIåŠ©æ‰‹ã€‚æ‚¨å¯ä»¥åœ¨å·¦ä¾§ç¼–è¾‘Markdownæ–‡æ¡£ï¼Œç„¶ååœ¨è¿™é‡Œä¸æˆ‘è®¨è®ºæ‚¨çš„å†…å®¹ã€‚\n                </div>\n                <div className=\"message-time\">ç°åœ¨</div>\n              </div>\n            </div>\n            <div className=\"chat-input-container\">\n              <textarea \n                className=\"chat-input\"\n                placeholder=\"è¾“å…¥æ¶ˆæ¯...\"\n              />\n              <button className=\"send-button\">å‘é€</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}